#!/bin/sh
# Husky pre-commit hook - Run all quality checks before commit

echo "ğŸ” Running pre-commit checks..."

# 1. Format check
echo "\nğŸ“ Checking code formatting..."
pnpm format:check || {
  echo "âŒ Formatting check failed. Run 'pnpm format' to fix."
  exit 1
}

# 2. Lint
echo "\nğŸ”§ Running ESLint..."
pnpm lint || {
  echo "âŒ Linting failed. Fix errors or run 'pnpm lint:fix'."
  exit 1
}

# 3. Type check
echo "\nğŸ” Running TypeScript type check..."
pnpm type-check || {
  echo "âŒ Type checking failed. Fix TypeScript errors."
  exit 1
}

# 4. Run tests with coverage
echo "\nğŸ§ª Running tests with coverage..."
pnpm coverage:all || {
  echo "âŒ Tests or coverage check failed."
  exit 1
}

echo "\nâœ… All pre-commit checks passed!"
