#!/bin/sh
# Husky pre-commit hook - Fast quality checks before commit

echo "ğŸ” Running pre-commit checks (fast)..."

# 1. Format check
echo "\nğŸ“ Checking code formatting..."
pnpm format:check > /dev/null 2>&1 || {
  echo "âŒ Formatting check failed. Run 'pnpm format' to fix."
  exit 1
}
echo "âœ… Formatting passed"

# 2. Lint
echo "\nğŸ”§ Running ESLint..."
pnpm lint > /dev/null 2>&1 || {
  echo "âŒ Linting failed. Fix errors or run 'pnpm lint:fix'."
  exit 1
}
echo "âœ… Linting passed"

# 3. Type check
echo "\nğŸ” Running TypeScript type check..."
pnpm type-check > /dev/null 2>&1 || {
  echo "âŒ Type checking failed. Fix TypeScript errors."
  exit 1
}
echo "âœ… Type checking passed"

# 4. Run unit tests only (fast)
echo "\nğŸ§ª Running unit tests..."
pnpm test > /dev/null 2>&1 || {
  echo "âŒ Unit tests failed. Run 'pnpm test' to see details."
  exit 1
}
echo "âœ… Unit tests passed"

echo "\nâœ… All pre-commit checks passed!"
echo "ğŸ’¡ Full coverage (unit + E2E) will run on pre-push"
